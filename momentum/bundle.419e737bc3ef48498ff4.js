(()=>{var e={965:()=>{const e=new Audio,t=document.querySelector("#play-prev"),n=document.querySelector("#play"),o=document.querySelector("#play-next"),a=document.querySelector("#play-list"),r=document.querySelector("#volume"),c=document.querySelector("#audioTime"),s=document.querySelector("#audioVolume"),i=document.querySelector("#duration"),l=document.querySelector("#currentTrek");let u,d=0,m=0;function g(){e.paused?(e.play(),n.classList.add("pause")):(n.classList.remove("pause"),e.pause())}function h(t){t.classList.contains("playing")||(u.forEach((e=>e.classList.remove("playing"))),t.classList.add("playing"),l.textContent="Now: "+t.textContent.replace(/[^a-z ]/gi,""),e.src=t.dataset.src,e.currentTime=0,p(),g())}function y(){d++,d%=m,h(u[d])}function f(e,t){e.value=t,e.style.background=`linear-gradient(to right, #ffffff8c 0%, #ffffffde ${t}%, #ffffff00 ${t}%, #ffffff00 100%)`}function p(){let t=Math.ceil(e.currentTime/e.duration*100)||0;f(c,t),i.textContent=`${v(e.currentTime)} / ${v(e.duration)}`,e.currentTime==e.duration&&y()}function v(e){let t=Math.floor(e/60)||0,n=Math.floor(e%60)||0;return t||n?n<10?`${t}:0${n}`:`${t}:${n}`:"0:0"}e.volume=.5,n.addEventListener("click",g),e.addEventListener("pause",(function(){n.classList.remove("pause")})),o.addEventListener("click",y),t.addEventListener("click",(function(){d--,d=(d+m)%m,h(u[d])})),a.addEventListener("click",(function(e){h(e.target)})),async function(){const e=await fetch("assets/Playlist.json");var t;t=await e.json(),m=t.length,t.forEach((e=>{let t=document.createElement("li");t.textContent=`${e.title} - ${e.duration}`,t.dataset.src=e.src,t.classList.add("play-item"),a.append(t)})),u=document.querySelectorAll(".play-item"),h(u[0]),g()}(),c.addEventListener("input",(function(t){let n=t.target.value;f(t.target,n),e.currentTime=n*e.duration/100})),s.addEventListener("input",(function(t){let n=t.target.value;f(t.target,n),e.volume=n/100,n<1?r.classList.add("mute"):r.classList.remove("mute")})),e.addEventListener("timeupdate",p),r.addEventListener("click",(function(){e.muted?(r.classList.remove("mute"),e.muted=!1,f(s,100*e.volume)):(r.classList.add("mute"),e.muted=!0,f(s,0))}))}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}(()=>{"use strict";const e={language:"en",photoSource:{github:"github",unsplash:"unsplash",flickr:"flickr"},blocks:["time","date","greeting","quote","weather","audio","todolist"]},t=document.querySelector("#time"),o=document.querySelector("#date"),a=document.querySelector("#greeting"),r=document.querySelector("#name"),c={weekday:"long",month:"long",day:"numeric"};let s,i,l=new Date;const u={en:["Good night","Good morning","Good afternoon","Good evening"],ru:["Доброй ночи","Доброе утро","Добрый день","Добрый вечер"]};function d(t=new Date){i=t;let n="en"==e.language?"en-US":"ru-Ru";o.textContent=l.toLocaleDateString(n,c)}function m(e=(new Date).getHours()){return s=e,Math.floor(e/6)}function g(t=l.getHours()){a.textContent=u[e.language][m(t)]}!function e(){l=new Date;const n=l.getHours(),o=l.getDate();!function(n){const o=n.toLocaleTimeString();t.textContent=o,setTimeout(e,1e3)}(l),i!==o&&d(l),s!==n&&g(n)}();const h=document.querySelector("#quote"),y=document.querySelector("#author"),f=document.querySelector("#change-quote");async function p(){let t=e.language;const n=await fetch("assets/Quotes.json"),o=await n.json();let a=Math.round(19*Math.random());h.textContent=o[a][`text-${t}`],y.textContent=o[a][`author-${t}`]}p(),f.addEventListener("click",p);const v=document.querySelector(".weather-icon"),S=document.querySelector(".temperature"),q=document.querySelector(".weather-description"),x=document.querySelector(".city"),L=document.querySelector(".wind"),w=document.querySelector(".humidity"),k=document.querySelector(".weather-error");let C={en:{wind:"wind speed",windUnits:"m/s",humidity:"humidity"},ru:{wind:"скорость ветра",windUnits:"м/с",humidity:"влажность"}};async function b(t="minsk"){let n=e.language;const o=`https://api.openweathermap.org/data/2.5/weather?q=${t}&lang=${n}&appid=ef5e10fdc5ecfe3b8b6db6cb6096d245&units=metric`;try{const e=await fetch(o);if(e.ok){const t=await e.json();x.value=t.name,v.className="weather-icon owf",v.classList.add(`owf-${t.weather[0].id}`),L.textContent=C[n].wind+" "+Math.round(t.wind.speed)+" "+C[n].windUnits,S.textContent=`${Math.round(t.main.temp)}°C`,w.textContent=C[n].humidity+" "+Math.round(t.main.humidity)+"%",q.textContent=t.weather[0].description,k.textContent=""}else x.value="Unavailable",E(),k.textContent=e.statusText}catch(e){x.value="Unavailable",E(),k.textContent=e.message}setTimeout(b,6e5)}function E(){v.className="weather-icon owf",L.textContent="",S.textContent="",w.textContent="",q.textContent=""}b(x.value||"minsk"),x.addEventListener("change",(()=>{b(x.value)}));const _=document.querySelector("body"),$=(document.querySelector(".wrapper"),document.querySelector(".slide-next")),I=document.querySelector(".slide-prev");let T,j=[],M={unsplash:[],flickr:[]},A=0,D=!1;const G=["night","morning","afternoon","evening"];async function P(e="github",t=`nature,${G[m()]}`){let n,o,a,r,c,s,i,l;switch(clearInterval(T),j=[],e){case"github":o=G[m()];for(let e=1;e<=20;e++)j.push(`https://raw.githubusercontent.com/Aleksander-true/stage1-tasks/assets/images/${o}/${String(e).padStart(2,"0")}.jpg`);break;case"unsplash":n="af5Ad7xxQ5_kdj0tmATHfiOoO21RlGYPbuePYa98lzI",s="landscape",o=t,c=`https://api.unsplash.com/photos?per_page=20&orientation=landscape&query=${o}&client_id=${n}`;try{i=await fetch(c),l=await i.json();for(let e=0;e<20;e++)j.push(l[e].urls.regular);M.unsplash=j}catch(e){console.log(e.message),j=M.unsplash||j}console.log("photos unsplash",j);break;default:n="dec87a841a63127676ff371d3a9b2da5",o=t,a="url_h",r="json",c=`https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=${n}&tags=${o}&extras=url_h&format=json&nojsoncallback=1`,i=await fetch(c),l=await i.json();let e=0;l.photos.photo.forEach((t=>{t.url_h&&e<20&&(e++,j.push(t.url_h))}))}U(),T=setInterval(U,1e4)}function U(e=Math.round(Math.random()*j.length)){D=!1;let t=document.createElement("img");t.src=j[e],t.onload=()=>{_.style.backgroundImage=`url("${j[e]}")`,t.remove(),D=!0}}P(),$.addEventListener("click",(function(){D&&(A=(A+1)%j.length,clearInterval(T),U(A))})),I.addEventListener("click",(function(){D&&(A=(A+19)%j.length,clearInterval(T),U(A))})),n(965);const H=document.querySelector("#name"),N=document.querySelector(".city"),Q=document.querySelector("#settings"),R=document.querySelector("#en"),z=document.querySelector("#ru"),O=document.querySelector(".language_description"),Y=document.querySelector(".img-API_description"),V=document.querySelector(".settings-container.tags"),W=document.querySelector(".block-visibility_description"),B=document.querySelector(".block_weather"),F=document.querySelector(".block_player"),J=document.querySelector(".block_quotes"),K=document.querySelector(".block_time"),X=document.querySelector(".block_date"),Z=document.querySelector(".block_greeting"),ee=document.querySelector(".tags_description");let te;window.addEventListener("beforeunload",(function(){localStorage.setItem("name",H.value),localStorage.setItem("city",N.value)})),window.addEventListener("load",(function(){localStorage.getItem("name")&&(H.value=localStorage.getItem("name"),N.value=localStorage.getItem("city"))})),Q.addEventListener("click",(function(t){t.target.classList.contains("language")&&(document.querySelectorAll(".language").forEach((e=>e.classList.remove("active"))),t.target.classList.add("active"),t.target.classList.contains("language_eng")?(e.language="en",R.textContent="ENG",z.textContent="RU",O.textContent="Language:",Y.textContent="Image source:",W.textContent="Show blocks:",B.textContent="Weather",F.textContent="Player",J.textContent="Quotes",K.textContent="Time",X.textContent="Date",Z.textContent="Greeting",ee.textContent="Enter tags:"):(e.language="ru",R.textContent="АНГ",z.textContent="РУС",O.textContent="Язык приложения:",Y.textContent="Ресурс изображений:",W.textContent="Показывать блоки:",B.textContent="Погода",F.textContent="Плеер",J.textContent="Цитаты",K.textContent="Время",X.textContent="Дата",Z.textContent="Приветствие",ee.textContent="Введите тэги:"),g(),d(),b(N.value),p(),"en"==e.language?r.placeholder="[Enter name]":r.placeholder="[Введите имя]"),t.target.classList.contains("img-API")&&(document.querySelectorAll(".img-API").forEach((e=>e.classList.remove("active"))),t.target.classList.add("active"),"github"!==t.target.id?V.style.visibility="visible":V.style.visibility="hidden",te=e.photoSource[t.target.id],P(te)),t.target.classList.contains("block-visibility")&&(t.target.classList.toggle("active"),t.target.classList.contains("block_weather")&&document.querySelector("#weather").classList.toggle("hidden"),t.target.classList.contains("block_time")&&document.querySelector("#time").classList.toggle("hidden"),t.target.classList.contains("block_date")&&document.querySelector("#date").classList.toggle("hidden"),t.target.classList.contains("block_quotes")&&document.querySelector("#footer").classList.toggle("hidden"),t.target.classList.contains("block_player")&&document.querySelector("#player").classList.toggle("hidden"),t.target.classList.contains("block_greeting")&&document.querySelector("#greeting-container").classList.toggle("hidden"))})),document.querySelector("#gear").addEventListener("click",(function(){"translate(-50%, 0px)"==Q.style.transform?Q.style.transform="translate(-50%, -100%)":Q.style.transform="translate(-50%, 0px)"}));const ne=document.querySelector("#input-tags");ne.addEventListener("change",(function(){P(te,ne.value)}))})()})();