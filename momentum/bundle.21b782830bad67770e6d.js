(()=>{var e={965:()=>{const e=new Audio,t=document.querySelector("#play-prev"),n=document.querySelector("#play"),a=document.querySelector("#play-next"),o=document.querySelector("#play-list"),r=document.querySelector("#volume"),c=document.querySelector("#audioTime"),s=document.querySelector("#audioVolume"),u=document.querySelector("#duration");let l,i=0,d=0;function m(){e.paused?(e.play(),n.classList.add("pause")):(n.classList.remove("pause"),e.pause())}function g(t){t.classList.contains("playing")||(l.forEach((e=>e.classList.remove("playing"))),t.classList.add("playing"),e.src=t.dataset.src,e.currentTime=0,p(),m())}function f(){i++,i%=d,g(l[i])}function h(e,t){e.value=t,e.style.background=`linear-gradient(to right, #ffffff8c 0%, #ffffffde ${t}%, #ffffff00 ${t}%, #ffffff00 100%)`}function p(){let t=Math.ceil(e.currentTime/e.duration*100)||0;h(c,t),u.textContent=`${y(e.currentTime)} / ${y(e.duration)}`,e.currentTime==e.duration&&f()}function y(e){let t=Math.floor(e/60)||0,n=Math.floor(e%60)||0;return t||n?n<10?`${t}:0${n}`:`${t}:${n}`:"0:0"}e.volume=.5,n.addEventListener("click",m),e.addEventListener("pause",(function(){n.classList.remove("pause")})),a.addEventListener("click",f),t.addEventListener("click",(function(){i--,i=(i+d)%d,g(l[i])})),o.addEventListener("click",(function(e){g(e.target)})),async function(){const t=await fetch("assets/Playlist.json");var n;n=await t.json(),d=n.length,n.forEach((e=>{let t=document.createElement("li");t.textContent=`${e.title} - ${e.duration}`,t.dataset.src=e.src,t.classList.add("play-item"),o.append(t)})),l=document.querySelectorAll(".play-item"),e.src=l[0].dataset.src}(),c.addEventListener("input",(function(t){let n=t.target.value;h(t.target,n),e.currentTime=n*e.duration/100})),s.addEventListener("input",(function(t){let n=t.target.value;h(t.target,n),e.volume=n/100,n<1?r.classList.add("mute"):r.classList.remove("mute")})),e.addEventListener("timeupdate",p),r.addEventListener("click",(function(){e.muted?(r.classList.remove("mute"),e.muted=!1,h(s,100*e.volume)):(r.classList.add("mute"),e.muted=!0,h(s,0))}))}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}(()=>{"use strict";const e={language:"en",photoSource:{github:"github",unsplash:"unsplash",flickr:"flickr"},blocks:["time","date","greeting","quote","weather","audio","todolist"]},t=document.querySelector("#time"),a=document.querySelector("#date"),o=document.querySelector("#greeting"),r=document.querySelector("#name"),c={weekday:"long",month:"long",day:"numeric"};let s,u,l=new Date;const i={en:["Good night","Good morning","Good afternoon","Good evening"],ru:["Доброй ночи","Доброе утро","Добрый день","Добрый вечер"]};function d(t=new Date){u=t;let n="en"==e.language?"en-US":"ru-Ru";a.textContent=l.toLocaleDateString(n,c)}function m(e=(new Date).getHours()){return s=e,Math.floor(e/6)}function g(t=l.getHours()){o.textContent=i[e.language][m(t)]}!function e(){l=new Date;const n=l.getHours(),a=l.getDate();!function(n){const a=n.toLocaleTimeString();t.textContent=a,setTimeout(e,1e3)}(l),u!==a&&d(l),s!==n&&g(n)}();const f=document.querySelector("#quote"),h=document.querySelector("#author"),p=document.querySelector("#change-quote");async function y(){let t=e.language;const n=await fetch("assets/Quotes.json"),a=await n.json();let o=Math.round(19*Math.random());f.textContent=a[o][`text-${t}`],h.textContent=a[o][`author-${t}`]}y(),p.addEventListener("click",y);const v=document.querySelector(".weather-icon"),S=document.querySelector(".temperature"),w=document.querySelector(".weather-description"),q=document.querySelector(".city"),L=document.querySelector(".wind"),x=document.querySelector(".humidity"),k=document.querySelector(".weather-error");let E={en:{wind:"wind speed",windUnits:"m/s",humidity:"humidity"},ru:{wind:"скорость ветра",windUnits:"м/с",humidity:"влажность"}};async function $(t="minsk"){let n=e.language;const a=`https://api.openweathermap.org/data/2.5/weather?q=${t}&lang=${n}&appid=ef5e10fdc5ecfe3b8b6db6cb6096d245&units=metric`;try{const e=await fetch(a);if(e.ok){const t=await e.json();q.value=t.name,v.className="weather-icon owf",v.classList.add(`owf-${t.weather[0].id}`),L.textContent=E[n].wind+" "+Math.round(t.wind.speed)+" "+E[n].windUnits,S.textContent=`${Math.round(t.main.temp)}°C`,x.textContent=E[n].humidity+" "+Math.round(t.main.humidity)+"%",w.textContent=t.weather[0].description}else q.value="Unavailable",k.textContent=e.statusText}catch(e){q.value="Unavailable",k.textContent=e.message}setTimeout($,6e5)}$(q.value||"minsk"),q.addEventListener("change",(()=>{$(q.value)}));const C=document.querySelector("body"),b=(document.querySelector(".wrapper"),document.querySelector(".slide-next")),I=document.querySelector(".slide-prev");let j,M=[],T={unsplash:[],flickr:[]},_=0,A=!1;const U=["night","morning","afternoon","evening"];async function D(e="github"){let t,n,a,o,r,c,s,u;switch(clearInterval(j),console.log("source",e),M=[],e){case"github":n=U[m()];for(let e=1;e<=20;e++)M.push(`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${n}/${String(e).padStart(2,"0")}.jpg`);break;case"unsplash":t="af5Ad7xxQ5_kdj0tmATHfiOoO21RlGYPbuePYa98lzI",c="landscape",n=`nature,${U[m()]}`,r=`https://api.unsplash.com/photos?per_page=20&orientation=landscape&query=${n}&client_id=${t}`;try{s=await fetch(r),u=await s.json();for(let e=0;e<20;e++)M.push(u[e].urls.regular);T.unsplash=M}catch(e){console.log(e.message),M=T.unsplash||M}console.log("photos unsplash",M);break;default:t="dec87a841a63127676ff371d3a9b2da5",n=`nature,${U[m()]}`,a="url_h",o="json",r=`https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=${t}&tags=${n}&extras=url_h&format=json&nojsoncallback=1`,s=await fetch(r),u=await s.json();let e=0;u.photos.photo.forEach((t=>{t.url_h&&e<20&&(e++,M.push(t.url_h))}))}G(),j=setInterval(G,1e4)}function G(e=Math.round(Math.random()*M.length)){A=!1;let t=document.createElement("img");t.src=M[e],t.onload=()=>{C.style.backgroundImage=`url("${M[e]}")`,t.remove(),A=!0}}D(),b.addEventListener("click",(function(){A&&(_=(_+1)%M.length,clearInterval(j),G(_))})),I.addEventListener("click",(function(){A&&(_=(_+19)%M.length,clearInterval(j),G(_))})),n(965);const P=document.querySelector("#name"),H=document.querySelector(".city"),R=document.querySelector("#settings"),N=document.querySelector("#en"),O=document.querySelector("#ru"),Q=document.querySelector(".language_description"),Y=document.querySelector(".img-API_description");window.addEventListener("beforeunload",(function(){localStorage.setItem("name",P.value),localStorage.setItem("city",H.value)})),window.addEventListener("load",(function(){localStorage.getItem("name")&&(P.value=localStorage.getItem("name"),H.value=localStorage.getItem("city"))})),R.addEventListener("click",(function(t){t.target.classList.contains("language")&&(document.querySelectorAll(".language").forEach((e=>e.classList.remove("active"))),t.target.classList.add("active"),t.target.classList.contains("language_eng")?(e.language="en",N.textContent="ENG",O.textContent="RU",Q.textContent="Language:",Y.textContent="Image source:"):(e.language="ru",N.textContent="АНГ",O.textContent="РУС",Q.textContent="Язык приложения:",Y.textContent="Ресурс изображений:"),g(),d(),$(H.value),y(),"en"==e.language?r.placeholder="[Enter name]":r.placeholder="[Введите имя]"),t.target.classList.contains("img-API")&&(document.querySelectorAll(".img-API").forEach((e=>e.classList.remove("active"))),t.target.classList.add("active"),D(e.photoSource[t.target.id]))})),document.querySelector("#gear").addEventListener("click",(function(){"translate(-50%, 0px)"==R.style.transform?R.style.transform="translate(-50%, -100%)":R.style.transform="translate(-50%, 0px)"}))})()})();